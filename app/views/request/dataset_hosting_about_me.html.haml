- @title = "Dataset Hosting Request"

- content_for :header do
  .header-container
    .container
      %h1.page-heading
        = @title

- register_visible = (@sign_in != true)

#sign-up-form{ style: "#{"display: none;" unless register_visible}" }
  .sign-up-form
    .sign-up-form-title
      About Yourself

    = form_for @hosting_request, url: dataset_hosting_register_user_path, method: :post, html: { class: "form-vertical", id: "recaptcha-form" } do |f|
      = f.hidden_field :description
      = f.hidden_field :institution_name

      = render "layouts/form_group", errors: @registration_errors, object: :user, attribute: :first_name, attribute_name: "Full name"
      = render "layouts/form_group", errors: @registration_errors, object: :user, attribute: :email, attribute_name: "Email"

      - invisible_recaptcha = false
      - if RECAPTCHA_ENABLED && !invisible_recaptcha
        .form-group
          %label.control-label Human Verification
          .g-recaptcha{ data: { sitekey: ENV["recaptcha_site_key"] } }
          <script src="https://www.google.com/recaptcha/api.js" async defer></script>

      - if @registration_errors && @registration_errors[:recaptcha].present?
        .form-group.text-center
          %small.text-danger= @registration_errors[:recaptcha]

      .form-group.submit-btn-container
        - if RECAPTCHA_ENABLED && invisible_recaptcha
          %button.g-recaptcha.btn.btn-primary.btn-block.btn-shadow{ data: { sitekey: ENV["recaptcha_site_key"], callback: "recaptchaFormSubmit" } } Create an Account
          <script src="https://www.google.com/recaptcha/api.js" async defer></script>
        - else
          = f.submit "Create an Account", class: "btn btn-primary btn-block btn-shadow"

  .sign-up-form.text-center
    = succeed "." do
      = link_to "I already have an account", "#", data: { object: "toggle-sign-up" }, tabindex: "-1"

#sign-in-form{ style: "#{"display: none;" if register_visible}" }
  .sign-up-form
    .sign-up-form-title
      About Yourself

    = form_for @hosting_request, url: dataset_hosting_sign_in_user_path, method: :patch, html: { class: "form-vertical", id: "form_sign_in" } do |f|
      = f.hidden_field :description
      = f.hidden_field :institution_name

      .form-group{ class: @sign_in_errors ? "has-error" : "" }
        = label_tag :email, "Email", class: "control-label"
        = email_field_tag :email, "", class: "form-control"

      .form-group{ class: @sign_in_errors ? "has-error" : "" }
        = label_tag :password, "Password", class: "control-label"
        = link_to "(Forgot password?)", new_user_password_path, tabindex: "-1"
        = password_field_tag :password, "", class: "form-control", autocomplete: "current-password"
        - if @sign_in_errors
          %small.text-danger Invalid email or password.

      .form-group.submit-btn-container
        = f.submit "Sign in", class: "btn btn-primary btn-block btn-shadow"

  .sign-up-form.text-center
    New to the NSRR?
    = succeed "." do
      = link_to "I don't have an account", "#", data: { object: "toggle-sign-up" }
