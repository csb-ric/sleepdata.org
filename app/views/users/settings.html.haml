- @title = 'My Settings'
.page-header
  %h1= @title

= render 'layouts/flash_messages'

.row
  .col-md-6
    .panel.panel-info
      .panel-heading
        %span.glyphicon.glyphicon-cog
        My Settings
      .panel-body
        = form_for current_user, url: update_settings_path, html: { class: 'form-horizontal' } do |f|
          - if current_user.errors.any?
            #error_explanation.bs-callout.bs-callout-danger
              %h4
                = pluralize(current_user.errors.count, "error")
                prohibited settings from being saved

              %ul
                - current_user.errors.full_messages.each do |msg|
                  %li= msg

          .form-group
            = f.label :first_name, nil, class: 'col-md-3 control-label'
            .col-md-9
              = f.text_field :first_name, class: 'form-control'

          .form-group
            = f.label :last_name, nil, class: 'col-md-3 control-label'
            .col-md-9
              = f.text_field :last_name, class: 'form-control'

          .form-group
            = f.label :email, nil, class: 'col-md-3 control-label'
            .col-md-9
              = f.text_field :email, class: 'form-control'

          .form-group
            = f.label :username, 'Forum Username', class: 'col-md-3 control-label'
            .col-md-9
              = f.text_field :username, class: 'form-control', placeholder: current_user.name

          .form-group
            %label.col-md-3.control-label Receive Forum Emails
            .col-md-9
              .checkbox
                %label
                  = f.check_box :emails_enabled
                  Allow the NSRR to send you emails when a topic receives a reply to which you are subscribed, and when someone mentions you on the forum. Unchecking this box will disable forum emails.
                .bs-callout.bs-callout-info
                  %strong Note:
                  You will still receive emails for:
                  %ul
                    %li Progress updates for Data Access and Use Agreements
                    %li Password reset emails

          .form-group
            .col-md-offset-3.col-md-9
              = submit_tag 'Save Changes', class: 'btn btn-primary'

  .col-md-6
    .panel.panel-info
      .panel-heading
        %span.glyphicon.glyphicon-user
        My Forum Avatar
      .panel-body
        = image_tag current_user.avatar_url(80, 'identicon'), class: 'img-rounded'
        You can change your avatar at
        = link_to 'gravatar.com', 'http://gravatar.com', target: '_blank'

- @footer_img = 'settings-footer.jpg'
