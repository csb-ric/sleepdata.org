- @title = "My Settings"

.row
  .col-md-3.col-lg-3
    = render "internal/profile"
  .col-md-9.col-lg-6
    .dashboard-container
      .dashboard-title
        %strong My Settings

      = form_with model: current_user, url: update_settings_path, local: true do |form|
        = render "forms/vertical/text_field", form: form, object: current_user, key: :first_name
        = render "forms/vertical/text_field", form: form, object: current_user, key: :last_name
        = render "forms/vertical/email_field", form: form, object: current_user, key: :email

        .form-group.submit-btn-container
          = form.submit "Save Changes", class: "btn btn-primary"

    .dashboard-container
      .dashboard-title
        %strong My Forum Settings
      = form_with model: current_user, url: update_settings_path, local: true do |form|
        = render "forms/vertical/text_field", form: form, object: current_user, key: :username, key_name: "Forum Username", placeholder: current_user.name, help_text: "You can change your avatar at #{link_to "gravatar.com", "http://gravatar.com", target: "_blank"}.".html_safe
        = render "forms/vertical/check_box", form: form, object: current_user, key: :emails_enabled, key_name: "Enable Forum Emails", help_text: "Allow the NSRR to send you emails when a topic receives a reply to which you are subscribed, and when someone mentions you on the forum. Unchecking this box will disable forum emails. You will still receive emails for: (1) Data request updates, (2) Password reset emails"
        .form-group.submit-btn-container
          = form.submit "Save Changes", class: "btn btn-primary"

    .dashboard-container
      .dashboard-title
        %strong Change Password
      = form_for current_user, url: change_password_path, method: :patch, html: { class: "form-vertical" } do |form|
        .form-group
          = render "layouts/label_or_errors", form: form, object: current_user, key: :current_password, key_name: "Current Password"
          = form.password_field :current_password, class: "form-control", autocomplete: "off"

        .form-group
          = render "layouts/label_or_errors", form: form, object: current_user, key: :password, key_name: "New Password"
          = form.password_field :password, class: "form-control", autocomplete: "off"

        .form-group
          = render "layouts/label_or_errors", form: form, object: current_user, key: :password_confirmation, key_name: "Password Confirmation"
          = form.password_field :password_confirmation, class: "form-control", autocomplete: "off"

        .form-group.submit-btn-container
          = form.submit "Update Password", class: "btn btn-primary"

  .d-none.d-lg-block.col-lg-3
    = render "internal/sidebar/blog_posts"
