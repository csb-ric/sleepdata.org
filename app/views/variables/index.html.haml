- @title = "#{"#{params[:folder].gsub('/', ' - ')} - " if params[:folder].present?} #{@dataset.slug.upcase} Variables"

= render "datasets/header"

= render "variables/folder_breadcrumb", folder: params[:folder], total_count: @variables.total_count

= render "search/simple", url: dataset_variables_path(@dataset)

- if @variables.present?
  %table.table.table-striped.table-hover
    %col{ width: "32px" }
    %col
    %col.d-none.d-sm-table
    %col.d-none.d-md-table
    %thead
      %tr.table-dark
        %th
        %th
          Name
          = render "search/toggle"
        %th.d-none.d-sm-table-cell.nowrap Display Name
        %th.d-none.d-md-table-cell Folder

    - @variables.each do |variable|
      %tr
        %td
          - if variable.commonly_used?
            %i.fa.fa-star.text-warning
        %td
          = link_to variable.name, dataset_variable_path(variable.dataset, variable)
          .d-block.d-sm-none
            = variable.display_name
        %td.d-none.d-sm-table-cell
          = variable.display_name
          %small.text-muted.variable-description= simple_markdown(variable.description, allow_lists: false)
        %td.d-none.d-md-table-cell= variable.folder
- elsif @dataset.variables.count.zero?
  .jumbotron{ style: "margin-top: 30px;" }
    %p
      We have not yet generated graphs for variables in this dataset.
    %p
      Please contact us directly at
      = mail_to "support@sleepdata.org"
      with any questions.
- else
  .jumbotron{ style: "margin-top: 30px;" }
    %p
      No variables found matching
      = succeed "." do
        %code= params[:search]
    %p
      Please contact us directly at
      = mail_to "support@sleepdata.org"
      with any questions.
