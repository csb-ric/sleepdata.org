- if false
  - if File.file?(File.join( @dataset.root_folder, 'dd', 'images', @version, "#{@variable.name}.png"))
    = image_tag image_dataset_variable_path(@variable.dataset, @variable), style: 'max-width: 100%;max-height:50px;display:block'

- json_location = File.join(@dataset.root_folder, 'dd', 'graphs', @version, "#{@variable.name}.json")
- json = JSON.parse(File.read(json_location)) rescue json = nil
- charts = []
- charts = json['charts'].keys.collect { |k| [k.titleize, k] } if json.is_a?(Hash) && json['charts'].is_a?(Hash)
- chart = charts.find { |chart_name, chart_value| chart_value == params[:g] }
- chart = charts.first unless chart

%ul.left-menu
  %li.left-menu-header= @variable.name
  %li
    = link_to 'Overview', dataset_variable_path(@dataset, @variable, v: params[:v]), class: (params[:action] == 'show' ? 'active' : nil)
  - if charts.size > 0
    %li.left-menu-header Graphs

    - charts.each do |chart_name, chart_value|
      %li= link_to chart_name, graphs_dataset_variable_path(@dataset, @variable, g: chart_value, v: params[:v]), class: (params[:action] == 'graphs' && chart.first == chart_name ? 'active' : nil)
  %li.left-menu-header More
  %li
    = link_to 'Known Issues', known_issues_dataset_variable_path(@dataset, @variable, v: params[:v]), class: (params[:action] == 'known_issues' ? 'active' : nil)
  %li
    = link_to 'Related', related_dataset_variable_path(@dataset, @variable, v: params[:v]), class: (params[:action] == 'related' ? 'active' : nil)
  %li
    = link_to 'History', history_dataset_variable_path(@dataset, @variable, v: params[:v]), class: (params[:action] == 'history' ? 'active' : nil)
