- @title = "Reviews - #{@dataset.name}"

- content_for :header do
  .header-container
    .container
      %h1.page-heading
        .float-right
          - if current_user && current_user.reviewed_dataset?(@dataset)
            - link_text = "Update my review"
          - else
            - link_text = "Write a review"
          = link_to pencil_or(link_text), new_dataset_dataset_review_path(@dataset), class: "btn btn-primary btn-shadow"
          = render "layouts/per_page", per_page: 40, object_count: @dataset_reviews.total_count
        Reviews
  .breadcrumb-container.mb-0
    .container
      %ol
        %li= link_to @dataset.name, @dataset
        %li= render "datasets/rating", rating: @dataset.rating

- if @dataset_reviews.count.zero?
  .lead.center{ style: "margin-top: 40px;" }
    No reviews for this dataset.
    = succeed "." do
      = link_to "Write a review", new_dataset_dataset_review_path(@dataset)
- else
  .dashboard-container
    %table.table.table-striped.table-borderless.table-hover
      %col{ width: "1px" }
      %col
      %thead
        %tr
          %th.center Rating
          %th Review

      %tbody
        - @dataset_reviews.each do |dataset_review|
          %tr
            %td= render "datasets/rating", rating: dataset_review.rating
            %td
              %i= link_to dataset_review.user.forum_name, dataset_dataset_review_path(@dataset, dataset_review)
              %small.text-muted= dataset_review.created_at.strftime("- %b %-d, %Y")
              = simple_markdown(dataset_review.review)
  .center-horizontally= paginate @dataset_reviews, theme: "bootstrap"
