- @title = 'Blog Posts'

- content_for :banner do
  .banner
    .container
      .banner-header
        .pull-right
          = link_to plus_or('New Blog Post'), new_broadcast_path, class: 'btn btn-accent btn-shadow'
          .per-page= render 'layouts/per_page', per_page: 40, object_count: @broadcasts.total_count
        %span.brand Blog Posts
        = link_to 'Go To Blog', blog_path, class: 'btn btn-xs btn-default'

%table.table
  %col{ width: '1px' }
  %col
  %col.hidden-xs
  %col.hidden-xs.hidden-sm
  %col.hidden-xs.hidden-sm
  %col{ width: '1px' }

  %thead
    %tr
      %th
      %th Title
      %th.hidden-xs Publish date
      %th.center.hidden-xs.hidden-sm Pinned
      %th.center.hidden-xs.hidden-sm Archived
      %th.center Actions

  %tbody
    - @broadcasts.each do |broadcast|
      %tr
        %td.center
          - if broadcast.published?
            %span.label.label-info{ rel: 'tooltip', data: { container: 'body', placement: 'top', title: 'Published' } } P
          - else
            %span.label.label-warning{ rel: 'tooltip', data: { container: 'body', placement: 'top', title: 'Draft' } } D
        %td= link_to broadcast.title, broadcast
        %td.nowrap.hidden-xs= broadcast.publish_date.strftime '%a %b %-d, %Y'
        %td.center.hidden-xs.hidden-sm= simple_check broadcast.pinned
        %td.center.hidden-xs.hidden-sm= simple_check broadcast.archived
        %td= render 'layouts/edit_delete_dropdown', edit_url: edit_broadcast_path(broadcast), delete_url: broadcast, delete_confirmation: "Delete #{broadcast.title}?"

.center= paginate @broadcasts, theme: 'bootstrap'
