- @title = "Reviews - #{@tool.name}"

- content_for :header do
  .header-container
    .container
      %h1.page-heading
        .float-right
          - if current_user && current_user.reviewed_tool?(@tool)
            - link_text = "Update my review"
          - else
            - link_text = "Write a review"
          = link_to pencil_or(link_text), new_tool_tool_review_path(@tool), class: "btn btn-primary btn-shadow"
          = render "layouts/per_page", per_page: 40, object_count: @tool_reviews.total_count
        Reviews
  .breadcrumb-container
    .container
      %ol
        %li= link_to @tool.name, tool_path(@tool)
        %li= render "tools/rating", rating: @tool.rating

- if @tool_reviews.count.zero?
  .lead.text-center{ style: "margin-top: 40px;" }
    No reviews for this tool.
    = succeed "." do
      = link_to "Write a review", new_tool_tool_review_path(@tool)
- else
  %table.table.table-striped.table-borderless.table-hover.table-sticky
    %col{ width: "1px" }
    %col
    %thead
      %tr
        %th.text-center Rating
        %th Review

    %tbody
      - @tool_reviews.each do |tool_review|
        %tr
          %td= render "tools/rating", rating: tool_review.rating
          %td
            %i= link_to tool_review.user.username, tool_tool_review_path(@tool, tool_review)
            %small.text-muted= tool_review.created_at.strftime("- %b %-d, %Y")
            = simple_markdown(tool_review.review)
  .center-horizontally= paginate @tool_reviews, theme: "bootstrap"
